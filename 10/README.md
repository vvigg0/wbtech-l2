# Утилита sort

## Описание задания

Необходимо реализовать упрощённый аналог UNIX-утилиты `sort` (сортировка строк).

Программа должна читать строки из файла или из STDIN и выводить их отсортированными.
Также должен поддерживаться режим проверки отсортированности входных данных.

Код должен корректно обрабатывать комбинации флагов, эффективно работать с большими файлами и проходить проверки `go vet` и `golint`.

---

## Поддерживаемые флаги

### Обязательные флаги (как в GNU sort)

- `-k N` — сортировка по колонке №N (нумерация с 1).  
  Разделитель колонок по умолчанию — табуляция.
- `-n` — сортировка по числовому значению.
- `-r` — сортировка в обратном порядке.
- `-u` — вывод только уникальных строк.

### Дополнительные флаги

- `-M` — сортировка по названию месяца (`Jan`, `Feb`, …, `Dec`).
- `-b` — игнорировать хвостовые пробелы (trailing blanks).
- `-c` — проверить, отсортированы ли данные; если нет, вывести сообщение и завершить работу с ненулевым кодом.
- `-h` — сортировка по числовому значению с учётом суффиксов (`K`, `M`, `G`, `T`).

### Прочие параметры

- `-f` — имя файла для чтения (если не указано, чтение идёт из STDIN).
- `-sep` — разделитель колонок (по умолчанию `\t`).

---

## Примеры использования

Сортировка по числовому значению первой колонки:

    cat test.txt | go run . -k 1 -n

Сортировка по месяцу во второй колонке:

    go run . -f test.txt -k 2 -M


Проверка, отсортированы ли данные:

    cat test.txt | go run . -k 3 -h -c

---

## Структура решения

Решение разделено на CLI-часть и пакет с логикой сортировки.

Каталог решения:

- `main.go`  
  Точка входа программы.  
  Отвечает за:
  - парсинг флагов,
  - чтение данных из файла или STDIN,
  - выбор режима работы (`-c` или сортировка),
  - вывод результата и коды выхода.

- пакет `mysort`  
  Содержит всю логику сортировки:
  - `Config` — структура конфигурации сортировки.
  - `BuildComparator` — построение компаратора на основе `Config`.
  - `CheckSort` — проверка, что входные данные отсортированы по компаратору (с учётом `-u`).
  - `Sort` — стабильная сортировка строк.
  - `UniqueSorted` — удаление дубликатов из уже отсортированных данных.

Компаратор инкапсулирует:
- извлечение ключа (`-k`),
- нормализацию строк (`-b`),
- режим сравнения (`-n`, `-M`, `-h`),
- реверс порядка (`-r`).

Благодаря этому все операции используют единые правила сравнения.

---

## Работа с большими файлами

Чтение входных данных реализовано через `bufio.Reader`, а не `bufio.Scanner`, чтобы избежать ограничения на длину строки.

Текущая реализация хранит все строки в памяти

---

## Проверки

Код успешно проходит:

    go vet
    golint
